{% extends "fiesta/base.html" %}
{% load breadcrumbs %}
{% load i18n %}
{% load event_tags %}
{% block main %}

{% if users_events %}
<div class="container">
  <h1 class="text-xl font-semibold text-base-content mb-6 border-b-2">Your events</h1>
  <ul>
    {% for event in users_events %}

    <a href="{% url 'events:event-detail' event.id %}">
      <div class="card card-compact bg-base-100 hover:bg-base-200 shadow-xl rounded-xl mb-6">
      
            <div class="card-body flex flex-row">
      
              {% if event.portrait_cover%}
              <div class="flex-shrink-0">
                  <div class="h-12 w-12 rounded-full bg-cover bg-center" style='background-image: url("{{ event.portrait_cover.url }}")'></div>
              </div>  
              {% endif %}
      
              <div class="flex-1">
                  <h2 class="text-xl card-title">{{ event.title }}</h2>
                  <p class="text-gray-600">{{ event.start.date }}</p>
              </div>
              {% if participant.state == participant.State.WAITING%}
                {% if not request.events.configuration.online_purchases %}
                  <div class="flex-auto">
                    <p class="text-base-content font-semibold  text-[15px] tracking-[0] leading-[normal] pb-1">You still have to come to our office and pay for the event!</p>
                  </div>
                {% else %}
                  <div class="flex-auto">
                    <p class="text-base-content font-semibold  text-[15px] tracking-[0] leading-[normal] pb-1">Pay now to confirm</p>
                  </div>
                  <div class="flex-0">
                    <p class="text-base-content font-semibold  text-[15px] tracking-[0] leading-[normal] pb-1">You still have to come to our office and pay for the event!</p>
                  </div>
                {% endif %}
              {% endif %}
    
          </div>
       
      </div>
      </a>

    {% endfor %}
  </ul>
</div>
{%endif%}

<div class="container">
  <h1 class="text-xl font-semibold text-base-content mb-6 border-b-2">Upcoming Events</h1>
  <ul>
    <!-- Event Item -->
    {% for event in upcoming_events %}
    
      {% include "events/parts/event_item.html" %}

    {% endfor %}
  </ul>
</div>

{% if request.membership.is_privileged %}
<div class="container">
  <h1 class="text-xl font-semibold text-base-content mb-6 border-b-2">Waiting confirmation</h1>
  <ul>
    <!-- Event Item -->
    {% for event in darft_events %}

      {% include "events/parts/event_item.html" %}

    {% endfor %}
  </ul>
</div>
{% endif %}



<!-- Only allow adding of events to members and admins -->
{% if not request.membership.is_international %}
<button class="btn btn-primary btn-outline grow"><a href="{% url "events:add-event" %}">Add event</a></button>
<button class="btn btn-primary btn-outline grow"><a href="{% url "events:place" %}">Places</a></button>
{% endif %}

{% endblock %}
