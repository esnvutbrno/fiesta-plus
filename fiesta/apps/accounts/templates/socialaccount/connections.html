{% extends "accounts/user_profile/base.html" %}
{% load breadcrumbs %}
{% load i18n %}


{% block upper_head %}
  {{ block.super }}
  {% trans "Social Accounts" as title %}
  {% breadcrumb_push_item title %}
{% endblock upper_head %}

{% block content %}
  <h1 class="card-title">Social Accounts</h1>

  {% if form.accounts %}
    <strong>
      Your active social accounts connections:
    </strong>

    <form method="POST" action="{% url 'socialaccount_connections' %}" class="w-64 mx-auto">
      {% csrf_token %}

      {% if form.non_field_errors %}
        <div class="Forms__error_text">{{ form.non_field_errors }}</div>
      {% endif %}

      {% for base_account in form.accounts %}
        {% with base_account.get_provider_account as account %}
          <div class="form-control">
            <label class="label cursor-pointer" for="id_account_{{ base_account.id }}">
              <input
                id="id_account_{{ base_account.id }}"
                type="radio"
                name="account"
                class="radio checked:bg-secondary"
                value="{{ base_account.id }}"
              />

              <span class="label-text">{{ account.get_brand.name }}: {{ account }}</span>
            </label>
          </div>
        {% endwith %}
      {% endfor %}

      <div class="text-right">
        <button type="submit" class="btn btn-primary btn-block btn-sm">{% trans 'Remove' %}</button>
      </div>

    </form>

  {% else %}
    <h2 class="alert alert-info">
      {% trans 'You currently have no social network accounts connected to this account.' %}
    </h2>
  {% endif %}

  <hr>

  <h2 class="card-title">{% trans 'Add New Social Account' %}:</h2>

  <div class="btn-group justify-center">
    {% include "socialaccount/snippets/provider_list.html" with process="connect" %}
  </div>

  {% include "socialaccount/snippets/login_extra.html" %}
{% endblock %}
